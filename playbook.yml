# vi: set ft=yaml.ansible :

- hosts: commons
  tags:
    - home
    - base
  roles:
    - name: base
      tags: ['apt']
    - name: oh_my_zsh
      tags: ['oh-my-zsh']
      become_user: "{{ user }}"
    - name: dotfiles
      tags: ['dotfiles']
      become_user: "{{ user }}"
  environment:
    - "{{ proxy_env | default ({}) }}"

- hosts: home_server
  tags:
    - home
    - tools
  roles:
    - name: nas
      tags: [ 'nas' ]
    - name: mailer
      tags: [ 'mailer' ]
    - name: scheduled_tasks
      tags: [ 'scheduled_tasks' ]
    - name: web_privacy_proxy
      tags: [ 'web_privacy_proxy' ]
    - name: authenticator
      tags: [ 'mfa' ]
    - name: ssh
      tags: [ 'ssh' ]
  environment:
    - "{{ proxy_env | default ({}) }}"

- hosts: devbox
  tags:
    - home
    - devbox
  roles:
    - name: docker
      tags: [ 'docker' ]
    - name: java
      tags: [ 'java' ]
    - name: nodejs
      tags: [ 'nodejs' ]
      become_user: "{{ user }}"
  environment:
    - "{{ proxy_env | default ({}) }}"

- hosts: work_server
  tags:
    - work
  roles:
    - name: authenticator
      tags: [ 'work_mfa' ]
    - name: ssh
      tags: [ 'work_ssh' ]
  environment:
    - "{{ proxy_env | default ({}) }}"

